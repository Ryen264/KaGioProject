//"View.h"
#pragma once

void FixConsoleWindow();		//hàm cố định kích thước Console
void GotoXY(int x, int y);		//hàm di chuyển trên Console
void DrawBoard(int pSize);		//hàm vẽ hình vuông bao quanh
int ProcessFinish(int pWhoWin);	//hàm xử lý thắng thua
int AskContinue();				//hàm hỏi tiếp tục

//"View.cpp"
#include "View.h"
#include "Global.h"
#include <Windows.h>	//header của Windows
#include <stdio.h>

void FixConsoleWindow()
{
	HWND concoleWindow = GetConsoleWindow();
	LONG style = GetWindowLong(concoleWindow, GWL_STYLE);
	style = style & ~(WS_MAXIMIZEBOX) & ~(WS_THICKFRAME);
	SetWindowLong(concoleWindow, GWL_STYLE, style);
}

void GotoXY(int x, int y)
{
	COORD coord;
	coord.X = x;
	coord.Y = y;
	SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), coord);
}

void DrawBoard(int pSize)
{
	for (int i = 0; i < pSize; i++)
	{
		for (int j = 0; j < pSize; j++)
		{
			GotoXY(LEFT + 4 * i, TOP + 2 * j);
			printf(".");
		}
	}
}

int ProcessFinish(int pWhoWin)
{
	GotoXY(0, _A[BOARD_SIZE - 1][BOARD_SIZE - 1].y + 2);	//nhảy đến vị trí thích hợp để in
	switch (pWhoWin)
	{
	case -1:
		printf("Nguoi choi %d da thang va nguoi choi %d da thua\n", true, false);
		break;
	case 1:
		printf("Nguoi choi %d da thang va nguoi choi %d da thua\n", false, true);
		break;
	case 0:
		printf("Nguoi choi %d da hoa nguoi choi %d\n", true, false);
		break;
	case 2:
		_TURN = !_TURN;	//Đổi lượt nếu không có gì xảy ra
		break;
	}
	GotoXY(_X, _Y);		//Trả về vị trí hiện hành của con trỏ màn hình
	return pWhoWin;
}

int AskContinue()
{
	GotoXY(0, _A[BOARD_SIZE - 1][BOARD_SIZE - 1].y + 4);	//nhảy đến vị trí thích hợp để in
	printf("Nhan 'y/n' de tiep tuc/dung: ");
	return toupper(getchar());
}
